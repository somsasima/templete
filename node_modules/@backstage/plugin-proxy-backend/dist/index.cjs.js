'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }

var Router = _interopDefault(require('express-promise-router'));
var createProxyMiddleware = _interopDefault(require('http-proxy-middleware'));

async function createRouter(options) {
  var _a;
  const router = Router();
  const proxyConfig = (_a = options.config.get("proxy")) != null ? _a : {};
  Object.entries(proxyConfig).forEach(([route, proxyRouteConfig]) => {
    router.use(route, createProxyMiddleware(proxyRouteConfig));
  });
  return router;
}

exports.createRouter = createRouter;
